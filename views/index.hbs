<div id="main" class="responsive-img">

  <div id="text" class="center renta">
    <b>Renta lo que quieras</b>
    <br>
    <a class='btn center' href='/signup'>Empieza hoy mismo</a>
  </div>

</div>


<div class="container" id="art">
  <h2 class="center">Categorías</h2>
   <div class="row">

    <div class="col s12 m4 l3">
        <figure class="snip1518">
          <div class="image"><img src="/images/cat-01.png" alt="sample101" /></div>
          <figcaption>
            <h5>Tecnología</h5>
          </figcaption>
          <a href="/tecnologia"></a>
        </figure>
    </div>

    <div class="col s12 m4 l3">
        <figure class="snip1518">
          <div class="image"><img src="/images/cat-02.png"  alt="sample101" /></div>
          <figcaption>
            <h5>Vehículos</h5>
          </figcaption>
          <a href="/vehiculos"></a>
        </figure>
    </div>

    <div class="col s12 m4 l3">
        <figure class="snip1518">
          <div class="image"><img src="/images/cat-03.png"  alt="sample101" /></div>
          <figcaption>
            <h5>Ropa</h5>
          </figcaption>
          <a href="/ropa"></a>
        </figure>
    </div>

    <div class="col s12 m4 l3">
        <figure class="snip1518">
          <div class="image"><img src="/images/cat-04.png"  alt="sample101" /></div>
          <figcaption>
            <h5>Inmuebles</h5>
          </figcaption>
          <a href="/inmuebles"></a>
        </figure>
    </div>

    <div class="col s12 m4 l3">
        <figure class="snip1518">
          <div class="image"><img src="/images/cat-05.png"  alt="sample101" /></div>
          <figcaption>
            <h5>Libros</h5>
          </figcaption>
          <a href="/libros"></a>
        </figure>
    </div>

    <div class="col s12 m4 l3">
        <figure class="snip1518">
          <div class="image"><img src="/images/cat-06.png"  alt="sample101" /></div>
          <figcaption>
            <h5>Videojuegos</h5>
          </figcaption>
          <a href="/videojuegos"></a>
        </figure>
    </div>

    <div class="col s12 m4 l3">
        <figure class="snip1518">
          <div class="image"><img src="/images/cat-07.png"  alt="sample101" /></div>
          <figcaption>
            <h5>Herramientas</h5>
          </figcaption>
          <a href="/herramientas"></a>
        </figure>
    </div>

    <div class="col s12 m4 l3">
        <figure class="snip1518">
          <div class="image"><img src="/images/cat-08.png"  alt="sample101" /></div>
          <figcaption>
            <h5>Muebles</h5>
          </figcaption>
          <a href="/muebles"></a>
        </figure>
    </div>
  </div>
</div>

<h2 class="center">Encuentra artículos cerca de ti</h2>

<div id="map" class="map" style="width:100%; height:400px;"></div>

<h2 class="center">Artículos Recomendados</h2>



<script>
  $('.dropdown-trigger').dropdown();
</script>


<script>

		var circle = null;
		var map    = null;
		var marker = null;
		function initMap(){
			var output = document.getElementById("map");

			if(navigator.geolocation){
				console.log("Tu navegador soporta la geolocalización");
			}
			else{
				console.log("Tu navegador NO soporta la geolocalización");
			}

			



			function localizacion(posicion){
				var lat=posicion.coords.latitude;
				var lng=posicion.coords.longitude;

				output.innerHTML = "<p>Latitud:"+lat+"<br>Longitud:"+lng+"</p>";
				var mapProp= {
    			center:new google.maps.LatLng(lat,lng),
    			zoom:15,
				};
				var miUbicacion = {lat,lng};
				var map=new google.maps.Map(document.getElementById("map"),mapProp);
				var marker = new google.maps.Marker({
    			position: miUbicacion,
    			map: map,
    			 draggable: true,
    				animation: google.maps.Animation.DROP,
    			title: 'Me encuentro aqui'
  				});
  				marker.addListener('click', toggleBounce);

  				function toggleBounce() {
				  if (marker.getAnimation() !== null) {
				    marker.setAnimation(null);
				  } else {
				    marker.setAnimation(google.maps.Animation.BOUNCE);
				  }
				}

  				var drawingManager = new google.maps.drawing.DrawingManager({
				drawingControlOptions:{
					drawingModes:["marker","circle"]
				}
			});
			drawingManager.setMap(map);

			google.maps.event.addListener(drawingManager,"overlaycomplete", function(event){
				if(event.type=="circle"){
					
					var center = event.overlay.getCenter();
					circle={
						radius: event.overlay.getRadius(),
						center:{
							lat: center.lat(),
							lng: center.lng()
						},
						overlay:event.overlay
					}
				}
				else if(event.type=="marker"){
					var position= event.overlay.position;
					marker={
						center:{
							lat: position.lat(),
							lng: position.lng()
						}
					}
					var isInRadius = google.maps.geometry.spherical.computeDistanceBetween(position,circle.overlay.getCenter()) <= circle.radius;	
				}
				else{
					console.log("ERROR");
				}
			});

				
			}

			function error(){
				output.innerHTML = "<p>No se pudó obtener tu localización</p>";
			}

			navigator.geolocation.getCurrentPosition(localizacion,error);

			
		}
	</script>
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAtU6T9WWG9eobQjPFNkcPAXLwH1QB0aVs&callback=initMap&libraries=drawing"
    async defer></script>